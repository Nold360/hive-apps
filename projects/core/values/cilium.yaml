# -- Install the cilium agent resources.
agent: true

# -- Agent container image.
image:
  override: ~
  repository: "quay.io/cilium/cilium-ci"
  tag: "v1.14"
  pullPolicy: "IfNotPresent"
  # cilium-digest
  digest: ""
  useDigest: false

cni:
  # -- Install the CNI configuration and binary files into the filesystem.
  install: true

ipam:
  mode: "cluster-pool"

ingressController:
  enabled: false

encryption:
  enabled: false

hostPort:
  enabled: false

socketLB:
  enabled: false

certgen:
  image:
    override: ~
    repository: "quay.io/cilium/certgen"
    tag: "v0.1.9@sha256:89a0847753686444daabde9474b48340993bd19c7bea66a46e45b2974b82041f"
    pullPolicy: "IfNotPresent"

hubble:
  enabled: true

  metrics:
    enabled:
    - dns:query;ignoreAAAA
    - drop
    - tcp
    - flow
    - icmp
    - http

  relay:
    enabled: true

    # -- Hubble-relay container image.
    image:
      override: ~
      repository: "quay.io/cilium/hubble-relay"
      tag: "v1.14.1"
       # hubble-relay-digest
      digest: ""
      useDigest: false
      pullPolicy: "IfNotPresent"

    # -- Number of replicas run for the hubble-relay deployment.
    replicas: 1

  ui:
    enabled: true
    standalone:
      enabled: false
    replicas: 1

    ingress:
      enabled: true
      className: ingress-internal
      annotations:
        cert-manager.io/cluster-issuer: vault-issuer
      hosts:
        - cilium.dc
      tls:
      - secretName: cilium-dc-tls
        hosts:
        - cilium.dc

ipv4:
  enabled: true

ipv6:
  enabled: false

kubeProxyReplacement: "strict"
l2NeighDiscovery:
  enabled: true
  refreshPeriod: "30s"
l7Proxy: true

enableIPv4Masquerade: true
enableIPv6Masquerade: false

prometheus:
  enabled: true
  serviceMonitor:
    enabled: true

operator:
  enabled: true

  # -- cilium-operator image.
  image:
    override: ~
    repository: "quay.io/cilium/operator"
    tag: "v1.14.1"
    useDigest: false
    pullPolicy: "IfNotPresent"

  # -- Number of replicas to run for the cilium-operator deployment
  replicas: 1

  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true

preflight:
  enabled: true

  # -- Cilium pre-flight image.
  image:
    override: ~
    repository: "quay.io/cilium/cilium"
    tag: "v1.14.1"
    # cilium-digest
    digest: ""
    useDigest: false
    pullPolicy: "IfNotPresent"
